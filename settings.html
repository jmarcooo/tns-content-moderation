<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Settings</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .settings-container { background-color: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; padding: 24px; box-shadow: var(--shadow); }
        .settings-section { padding-bottom: 24px; margin-bottom: 24px; border-bottom: 1px solid var(--border-color); }
        .settings-section:last-child { border-bottom: none; margin-bottom: 0; }
        .section-title { font-size: 1.1rem; font-weight: bold; color: var(--text-header); margin-bottom: 12px; }
        .settings-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .setting-label { font-weight: 600; color: var(--text-header); font-size: 0.95rem; margin-bottom: 4px; }
        .setting-desc { color: var(--text-muted); font-size: 0.85rem; }
        .key-input { width: 140px; padding: 8px; text-align: center; border: 1px solid var(--border-color); border-radius: 6px; background: var(--bg-input); color: var(--text-main); font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>
    <script src="sidebar.js"></script>
    <main class="main-content">
        <div class="header"><h1 id="txt-header">Settings</h1></div>
        
        <div class="settings-container">
            <div class="settings-section">
                <div class="section-title" id="txt-appear-title">Appearance</div>
                <div class="settings-row">
                    <div>
                        <div class="setting-label" id="txt-dark-mode">Dark Mode</div>
                        <div class="setting-desc" id="txt-dark-desc">Adjust the appearance to reduce eye strain.</div>
                    </div>
                    <button class="btn-cancel" id="btn-theme-toggle" onclick="window.toggleTheme()">Switch to Dark Mode</button>
                </div>
            </div>

            <div class="settings-section">
                <div class="section-title" id="txt-lang-title">Language / 语言</div>
                <div class="settings-row">
                    <div>
                        <div class="setting-label" id="txt-lang-label">Interface Language</div>
                        <div class="setting-desc" id="txt-lang-desc">Select your preferred language.</div>
                    </div>
                    <select id="langSelect" class="form-group" style="width: auto; margin-bottom: 0;" onchange="changeLanguage(this.value)">
                        <option value="en">English</option>
                        <option value="zh">中文 (Chinese)</option>
                    </select>
                </div>
            </div>

            <div class="settings-section">
                <div class="section-title">Keyboard Shortcuts</div>
                <div class="settings-row">
                    <div><div class="setting-label">Approve Content</div></div>
                    <input type="text" class="key-input" id="bind-approve-content" readonly>
                </div>
                <div class="settings-row">
                    <div><div class="setting-label">Reject Content</div></div>
                    <input type="text" class="key-input" id="bind-reject-content" readonly>
                </div>
                <div style="margin-top: 15px; display:flex; justify-content:flex-end;">
                     <button class="btn-primary" onclick="saveKeybinds()">Save Shortcuts</button>
                </div>
            </div>
        </div>
    </main>

    <script>
        // --- 1. TRANSLATION & THEME LOGIC ---
        const APP_LANG_SET = localStorage.getItem('appLang') || 'en';
        const TEXT = {
            en: { header: "Settings", appearTitle: "Appearance", darkMode: "Dark Mode", darkDesc: "Adjust the appearance to reduce eye strain.", btnDark: "Switch to Dark Mode", btnLight: "Switch to Light Mode", langTitle: "Language / 语言", langLabel: "Interface Language", langDesc: "Select your preferred language." },
            zh: { header: "设置", appearTitle: "外观", darkMode: "深色模式", darkDesc: "调整外观以减少眼睛疲劳。", btnDark: "切换到深色模式", btnLight: "切换到浅色模式", langTitle: "语言 / Language", langLabel: "界面语言", langDesc: "选择您的首选语言。" }
        };
        const T_SET = TEXT[APP_LANG_SET];

        // Apply Translations
        document.getElementById('txt-header').innerText = T_SET.header;
        document.getElementById('txt-appear-title').innerText = T_SET.appearTitle;
        document.getElementById('txt-dark-mode').innerText = T_SET.darkMode;
        document.getElementById('txt-dark-desc').innerText = T_SET.darkDesc;
        document.getElementById('txt-lang-title').innerText = T_SET.langTitle;
        document.getElementById('txt-lang-label').innerText = T_SET.langLabel;
        document.getElementById('txt-lang-desc').innerText = T_SET.langDesc;

        // Theme Button Logic
        function updateThemeButtonText() {
            const isDark = document.body.classList.contains('dark-mode');
            const btn = document.getElementById('btn-theme-toggle');
            if(btn) btn.innerText = isDark ? T_SET.btnLight : T_SET.btnDark;
        }
        
        // Init & Listen for global event from sidebar.js
        setTimeout(updateThemeButtonText, 50); 
        window.addEventListener('themeChanged', updateThemeButtonText);

        document.getElementById('langSelect').value = APP_LANG_SET;
        function changeLanguage(lang) {
            localStorage.setItem('appLang', lang);
            location.reload(); 
        }

        // --- 2. SHORTCUTS LOGIC ---
        const defaultBinds = { 'approve-content': '1', 'reject-content': '2' };
        const saved = JSON.parse(localStorage.getItem('appKeybinds')) || {};
        const currentBinds = { ...defaultBinds, ...saved };

        ['approve-content', 'reject-content'].forEach(key => {
            const el = document.getElementById(`bind-${key}`);
            if(el) el.value = currentBinds[key];
        });

        function saveKeybinds() { alert('Shortcuts Saved!'); }
    </script>
</body>
</html>
